(function(a){a(window.jQuery,window,document)}(function(f,j,o,h){var k="tocify",n="."+k,i="tocify-focus",e="tocify-hover",c="tocify-hide",p="."+c,a="tocify-header",d="."+a,l="tocify-subheader",m="."+l,g="tocify-item",b="."+g,q="tocify-extend-page",r="."+q;f.widget("toc.tocify",{version:"1.9.0",options:{context:".content",ignoreSelector:null,selectors:"h1, h2, h3",showAndHide:true,showEffect:"slideDown",showEffectSpeed:"medium",hideEffect:"slideUp",hideEffectSpeed:"medium",smoothScroll:false,smoothScrollSpeed:"300",scrollTo:0,showAndHideOnScroll:true,highlightOnScroll:true,highlightOffset:50,theme:"none",extendPage:true,extendPageOffset:100,history:true,scrollHistory:false,hashGenerator:"pretty",highlightDefault:true},_create:function(){var s=this;s.extendPageScroll=true;s.items=[];s._generateToc();s._addCSSClasses();s.webkit=(function(){for(var t in j){if(t){if(t.toLowerCase().indexOf("webkit")!==-1){return true}}}return false}());s._setEventHandlers();f(j).load(function(){s._setActiveElement(true);f("html, body").promise().done(function(){setTimeout(function(){s.extendPageScroll=false},0)})})},_generateToc:function(){var s=this,v,t,u=s.options.ignoreSelector;if(this.options.selectors.indexOf(",")!==-1){v=f(this.options.context).find(this.options.selectors.replace(/ /g,"").substr(0,this.options.selectors.indexOf(",")))}else{v=f(this.options.context).find(this.options.selectors.replace(/ /g,""))}if(!v.length){s.element.addClass(c);return}s.element.addClass(k);v.each(function(w){if(f(this).is(u)){return}t=f("<ul/>",{id:a+w,"class":a}).append(s._nestElements(f(this),w));s.element.append(t);f(this).nextUntil(this.nodeName.toLowerCase()).each(function(){if(f(this).find(s.options.selectors).length===0){f(this).filter(s.options.selectors).each(function(){if(f(this).is(u)){return}s._appendSubheaders.call(this,s,t)})}else{f(this).find(s.options.selectors).each(function(){if(f(this).is(u)){return}s._appendSubheaders.call(this,s,t)})}})})},_setActiveElement:function(u){var s=this,v=j.location.hash.substring(1),t=s.element.find('li[data-unique="'+v+'"]');if(v.length){s.element.find("."+s.focusClass).removeClass(s.focusClass);t.addClass(s.focusClass);if(s.options.showAndHide){t.click()}}else{s.element.find("."+s.focusClass).removeClass(s.focusClass);if(!v.length&&u&&s.options.highlightDefault){s.element.find(b).first().addClass(s.focusClass)}}return s},_nestElements:function(t,u){var s,v,w;s=f.grep(this.items,function(x){return x===t.text()});if(s.length){this.items.push(t.text()+u)}else{this.items.push(t.text())}w=this._generateHashValue(s,t,u);v=f("<li/>",{"class":g,"data-unique":w}).append(f("<a/>",{text:t.text()}));t.before(f("<div/>",{name:w,"data-unique":w}));return v},_generateHashValue:function(s,u,v){var w="",t=this.options.hashGenerator;if(t==="pretty"){w=u.text().toLowerCase().replace(/\s/g,"-");while(w.indexOf("--")>-1){w=w.replace(/--/g,"-")}while(w.indexOf(":-")>-1){w=w.replace(/:-/g,"-")}}else{if(typeof t==="function"){w=t(u.text(),u)}else{w=u.text().replace(/\s/g,"")}}if(s.length){w+=""+v}return w},_appendSubheaders:function(s,w){var v=f(this).index(s.options.selectors),x=f(s.options.selectors).eq(v-1),u=+f(this).prop("tagName").charAt(1),t=+x.prop("tagName").charAt(1),y;if(u<t){s.element.find(m+"[data-tag="+u+"]").last().append(s._nestElements(f(this),v))}else{if(u===t){w.find(b).last().after(s._nestElements(f(this),v))}else{w.find(b).last().after(f("<ul/>",{"class":l,"data-tag":u})).next(m).append(s._nestElements(f(this),v))}}},_setEventHandlers:function(){var s=this,u,t;this.element.on("click.tocify","li",function(w){if(s.options.history){j.location.hash=f(this).attr("data-unique")}s.element.find("."+s.focusClass).removeClass(s.focusClass);f(this).addClass(s.focusClass);if(s.options.showAndHide){var v=f('li[data-unique="'+f(this).attr("data-unique")+'"]');s._triggerShow(v)}s._scrollTo(f(this))});this.element.find("li").on({"mouseenter.tocify":function(){f(this).addClass(s.hoverClass);f(this).css("cursor","pointer")},"mouseleave.tocify":function(){if(s.options.theme!=="bootstrap"){f(this).removeClass(s.hoverClass)}}});if(s.options.extendPage||s.options.highlightOnScroll||s.options.scrollHistory||s.options.showAndHideOnScroll){f(j).on("scroll.tocify",function(){f("html, body").promise().done(function(){var x=f(j).scrollTop(),v=f(j).height(),w=f(o).height(),z=f("body")[0].scrollHeight,C,B,A,y;if(s.options.extendPage){if((s.webkit&&x>=z-v-s.options.extendPageOffset)||(!s.webkit&&v+x>w-s.options.extendPageOffset)){if(!f(r).length){B=f('div[data-unique="'+f(b).last().attr("data-unique")+'"]');if(!B.length){return}A=B.offset().top;f(s.options.context).append(f("<div />",{"class":q,height:Math.abs(A-x)+"px","data-unique":q}));if(s.extendPageScroll){y=s.element.find("li.active");s._scrollTo(f('div[data-unique="'+y.attr("data-unique")+'"]'))}}}}setTimeout(function(){var G=null,F=null,E=f(s.options.context).find("div[data-unique]"),D;E.each(function(H){var I=Math.abs((f(this).next().length?f(this).next():f(this)).offset().top-x-s.options.highlightOffset);if(G==null||I<G){G=I;F=H}else{return false}});D=f(E[F]).attr("data-unique");C=f('li[data-unique="'+D+'"]');if(s.options.highlightOnScroll&&C.length){s.element.find("."+s.focusClass).removeClass(s.focusClass);C.addClass(s.focusClass)}if(s.options.scrollHistory){if(j.location.hash!=="#"+D){j.location.replace("#"+D)}}if(s.options.showAndHideOnScroll&&s.options.showAndHide){s._triggerShow(C,true)}},0)})})}},show:function(v,s){var t=this,u=v;if(!v.is(":visible")){if(!v.find(m).length&&!v.parent().is(d)&&!v.parent().is(":visible")){v=v.parents(m).add(v)}else{if(!v.children(m).length&&!v.parent().is(d)){v=v.closest(m)}}switch(t.options.showEffect){case"none":v.show();break;case"show":v.show(t.options.showEffectSpeed);break;case"slideDown":v.slideDown(t.options.showEffectSpeed);break;case"fadeIn":v.fadeIn(t.options.showEffectSpeed);break;default:v.show();break}}if(v.parent().is(d)){t.hide(f(m).not(v))}else{t.hide(f(m).not(v.closest(d).find(m).not(v.siblings())))}return t},hide:function(t){var s=this;switch(s.options.hideEffect){case"none":t.hide();break;case"hide":t.hide(s.options.hideEffectSpeed);break;case"slideUp":t.slideUp(s.options.hideEffectSpeed);break;case"fadeOut":t.fadeOut(s.options.hideEffectSpeed);break;default:t.hide();break}return s},_triggerShow:function(u,s){var t=this;if(u.parent().is(d)||u.next().is(m)){t.show(u.next(m),s)}else{if(u.parent().is(m)){t.show(u.parent(),s)}}return t},_addCSSClasses:function(){if(this.options.theme==="jqueryui"){this.focusClass="ui-state-default";this.hoverClass="ui-state-hover";this.element.addClass("ui-widget").find(".toc-title").addClass("ui-widget-header").end().find("li").addClass("ui-widget-content")}else{if(this.options.theme==="bootstrap"){this.element.find(d+","+m).addClass("nav nav-list");this.focusClass="active"}else{this.focusClass=i;this.hoverClass=e}}return this},setOption:function(){f.Widget.prototype._setOption.apply(this,arguments)},setOptions:function(){f.Widget.prototype._setOptions.apply(this,arguments)},_scrollTo:function(v){var t=this,w=t.options.smoothScroll||0,s=t.options.scrollTo,u=f('div[data-unique="'+v.attr("data-unique")+'"]');if(!u.length){return t}f("html, body").promise().done(function(){f("html, body").animate({scrollTop:u.offset().top-(f.isFunction(s)?s.call():s)+"px"},{duration:w})});return t}})}));
